@model Proestimator.ViewModel.ImageVM
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>ImageZoom</title>

    <style type="text/css">
        body {
            background: rgba(0,0,0,.4);
        }
        .main {
            height: 100%;
            width: 100%;
            line-height: 100%;
            /*padding-top: 100px;*/
            padding-top: 20px;
        }
        .map {
            /*width: 1200px;
            height: 600px;*/
            -webkit-box-shadow: 0px 0px 8px black;
            -moz-box-shadow: 0px 0px 8px black;
            box-shadow: 0px 0px 8px black;
            margin: auto;
        }

        div.navig {
            display: block;
            position: absolute;
            width: 56px;
            height: 56px;
            top: 16px;
            left: 4px;
            padding: 0px;
            margin: 0px;
            border: 0px none;
            white-space: nowrap;
            visibility: hidden;
            background: transparent url(/Images/navig/compass.png) 0px 0px no-repeat;
            z-index: 98;
            -moz-user-select: none;
            user-select: none;
            -webkit-touch-callout: none;
            -webkit-tap-highlight-color: rgba(0,0,0,0);
        }

        div.navig_north {
            display: block;
            position: absolute;
            top: 0px;
            left: 15px;
            width: 26px;
            height: 15px;
            padding: 0px;
            margin: 0px;
            cursor: pointer;
            border: 0px none;
        }

        div.navig_west {
            display: block;
            position: absolute;
            top: 15px;
            left: 0px;
            width: 15px;
            height: 26px;
            padding: 0px;
            margin: 0px;
            cursor: pointer;
            border: 0px none;
        }

        div.navig_info {
            display: block;
            position: absolute;
            top: 15px;
            left: 15px;
            width: 26px;
            height: 26px;
            padding: 0px;
            margin: 0px;
            border: 0px none;
            cursor: pointer;
            background: transparent url(/Images/navig/info_off.png) 0px 0px no-repeat;
        }

            div.navig_info:hover, div.navig_info:focus {
                background: transparent url(/Images/navig/info_on.png) 0px 0px no-repeat;
            }

        div.navig_east {
            display: block;
            position: absolute;
            top: 15px;
            right: 0px;
            width: 15px;
            height: 26px;
            padding: 0px;
            margin: 0px;
            cursor: pointer;
            border: 0px none;
        }

        div.navig_south {
            display: block;
            position: absolute;
            bottom: 0px;
            left: 15px;
            width: 26px;
            height: 15px;
            padding: 0px;
            margin: 0px;
            cursor: pointer;
            border: 0px none;
        }

        div.slider_outer {
            display: block;
            position: absolute;
            top: 72px;
            left: 17px;
            width: 30px;
            height: 129px;
            padding: 0px;
            margin: 0px;
            border: 0px none;
            white-space: nowrap;
            visibility: hidden;
            background: transparent url(/Images/navig/scale.png) 0px 0px no-repeat;
            z-index: 98;
            -moz-user-select: none;
            user-select: none;
            -webkit-touch-callout: none;
            -webkit-tap-highlight-color: rgba(0,0,0,0);
        }

        div.slider_plus {
            display: block;
            position: absolute;
            top: 2px;
            left: 2px;
            width: 26px;
            height: 26px;
            padding: 0px;
            margin: 0px;
            cursor: pointer;
            border: 0px none;
            background: transparent url(/Images/navig/plus_off.png) no-repeat 0px 0px;
        }

            div.slider_plus:hover, div.slider_plus:focus {
                background: transparent url(/Images/navig/plus_on.png) no-repeat 0px 0px;
            }

        div.slider_minus {
            display: block;
            position: absolute;
            bottom: 2px;
            left: 2px;
            width: 26px;
            height: 26px;
            padding: 0px;
            margin: 0px;
            cursor: pointer;
            border: 0px none;
            background: transparent url(/Images/navig/minus_off.png) no-repeat 0px 0px;
        }

            div.slider_minus:hover, div.slider_minus:focus {
                background: transparent url(/Images/navig/minus_on.png) no-repeat 0px 0px;
            }

        div.slider_inner {
            display: block;
            position: relative;
            width: 30px;
            height: 69px;
            padding: 0px;
            margin: 30px 0 30px 0;
            border: 0px none;
            background: transparent;
        }

        div.slider_knob {
            display: block;
            position: absolute;
            left: 0px;
            bottom: 0px;
            width: 30px;
            height: 11px;
            padding: 0px;
            margin: 0px;
            cursor: pointer;
            border: 0px none;
            background: transparent url(/Images/navig/slider_off.png) no-repeat 0px 0px;
        }

            div.slider_knob:hover, div.slider_knob:focus, div.slider_knob.onfocus {
                background: transparent url(/Images/navig/slider_on.png) no-repeat 0px 0px;
            }

        #info-mouse {
            display: block;
            position: absolute;
            top: 15px;
            left: 40px;
            /*width: 50px;
            height: 100px;*/
            padding: 0px;
            margin: 0px;
            /*border: 0px none;*/
            border: 1px solid white;
            white-space: nowrap;
            visibility: hidden; /*visible;*/
            color: white;
            background-color: grey;
        }

        .navig_info:hover #info-mouse {
            visibility: visible;
        }

        .navig_info #info-mouse {
            visibility: hidden;
        }

        dt {
            text-align: left;
            margin-left: 10px;
            width: auto;
        }

        dd {
            text-align: left;
            width: auto;
            margin-right: 10px;
        }
    </style>

    <script type="text/javascript" src="@Url.Content("~/Scripts/shiftzoom.js")"></script>
    <script src="@Url.Content("~/Scripts/cvi_slider_lib.js")" type="text/javascript"></script>
    <script type="text/javascript">
        if (typeof $ == 'undefined') { function $(v) { return (document.getElementById(v)); } }
        if (document.images && document.createElement && document.getElementById) {
            document.writeln('<style type="text/css">');
            document.writeln('img.shiftzoom { visibility: hidden; }');
            document.writeln('<\/style>');
        }
        function zoom(v) {
            var n = 0, f = 0.6, c = 50, p = {}, o = $('ImageLarge'), s = $('slider');
            if (o && !shiftzoom.get(o, 'playing')) {
                p = shiftzoom.get(o, 'currentxyz');
                s.style.bottom = (p.z * f) + "px";
                if (p.z <= 0) { p.x = 50; p.y = 50; }
                if (v === "+" && p.z < 100) {
                    window.clearInterval(trigger);
                    n = Math.min(p.z + c, 100);
                    s.style.bottom = (n * f) + "px";
                    shiftzoom.kenburns(o, [p.x, p.y, n, 3, false, false, 'refresh']);
                } else if (v === "-" && p.z > 0) {
                    window.clearInterval(trigger);
                    n = Math.max(p.z - c, 0);
                    s.style.bottom = (n * f) + "px";
                    shiftzoom.kenburns(o, [p.x, p.y, n, 3, false, false, 'refresh']);
                }
            } return false;
        }
        function move_h(v) {
            var n = 0, c = 50, p = {}, o = $('ImageLarge');
            if (o && !shiftzoom.get(o, 'playing')) {
                p = shiftzoom.get(o, 'currentxyz');
                if (v === "+" && p.x < 100) {
                    n = Math.min(p.x + c, 100);
                    shiftzoom.kenburns(o, [n, p.y, p.z, 3]);
                } else if (v === "-" && p.x > 0) {
                    n = Math.max(p.x - c, 0);
                    shiftzoom.kenburns(o, [n, p.y, p.z, 3]);
                }
            } return false;
        }
        function move_v(v) {
            var n = 0, c = 50, p = {}, o = $('ImageLarge');
            if (o && !shiftzoom.get(o, 'playing')) {
                p = shiftzoom.get(o, 'currentxyz');
                if (v === "+" && p.y < 100) {
                    n = Math.min(p.y + c, 100);
                    shiftzoom.kenburns(o, [p.x, n, p.z, 3]);
                } else if (v === "-" && p.y > 0) {
                    n = Math.max(p.y - c, 0);
                    shiftzoom.kenburns(o, [p.x, n, p.z, 3]);
                }
            } return false;
        }
        function refresh() {
            trigger = window.setInterval(function () {
                var p = {}, o = $('ImageLarge'), s = $('slider');
                p = shiftzoom.get(o, 'currentxyz');
                s.style.bottom = (p.z * 0.6) + "px";
            }, 1000);
        }
        var slide = "", trigger = "", last_icon = "";
        window.onload = function () {
            if ($('ImageLarge') && $('slider')) {
                slide = cvi_slider.attach($('slider'), 0, 0, 100, true, true);
                slide.slideBegin = function (v) { window.clearInterval(trigger); };
                slide.slideMove = function (v) {
                    window.clearInterval(trigger);
                    var o = $('ImageLarge'), p = shiftzoom.get(o, 'currentxyz');
                    if (p.z <= 0) { p.x = 50; p.y = 50; }
                    shiftzoom.kenburns(o, [p.x, p.y, v, 3]);
                };
                slide.slideEnd = function (v) {
                    window.clearInterval(trigger);
                    var o = $('ImageLarge'), p = shiftzoom.get(o, 'currentxyz');
                    if (p.z <= 0) { p.x = 50; p.y = 50; }
                    shiftzoom.kenburns(o, [p.x, p.y, v, 3, false, false, 'refresh']);
                };
                $('navi-cross').style.visibility = "visible";
                refresh();
            }
        };
    </script>
</head>
<body>
    <!--<div class="hover_bkgr">
            <span class="helper"></span>-->
    <div class="main">
        <!--<div class="map" onload="this.style.width = (screen.width - 400)+'px'; this.style.height = (screen.height - 400)+'px';">
    <img id="ImageLarge" class="shiftzoom" onLoad="this.style.width = (screen.width - 400)+'px'; this.style.height = (screen.height - 400)+'px';shiftzoom.add(this,{buttons:false,fading:true,showcoords:true,pixelcoords:true,zoomin:50,zoomout:50});" src="@Model.ImagePath" alt="large image" border="0" />-->
        <!--<div class="map" onload="this.style.width = (window.innerWidth - 200)+'px'; this.style.height = (window.innerHeight - 200)+'px';">
    <img id="ImageLarge" class="shiftzoom" onLoad="this.style.width = (window.innerWidth - 200)+'px';this.style.height = (window.innerHeight - 200)+'px';shiftzoom.add(this,{buttons:false,fading:true,showcoords:true,pixelcoords:true,zoomin:50,zoomout:50});" src="@Model.ImagePath" alt="large image" border="0" />-->
        <div class="map" onload="this.style.width = (window.innerWidth - 40)+'px'; this.style.height = (window.innerHeight - 40)+'px';">
        <img id="ImageLarge" class="shiftzoom" onLoad="this.style.width = (window.innerWidth - 40)+'px';this.style.height = (window.innerHeight - 40)+'px';shiftzoom.add(this,{buttons:false,fading:true,showcoords:true,pixelcoords:true,zoomin:50,zoomout:50});" src="@Model.ImagePath" alt="large image" border="0" />

            <!--<div id="crosshair_x"></div>
        <div id="crosshair_y"></div>-->

            <div class="navig" id="navi-cross">
                <div class="navig_north"><img onclick="move_v('-');" src="~/Images/cursors/nop.gif" width="26" height="15" alt="" border="0" title="move up" /></div>
                <div class="navig_west"><img onclick="move_h('-');" src="~/Images/cursors/nop.gif" width="15" height="26" alt="" border="0" title="move left" /></div>
                <div class="navig_info">
                    <img class="img-info-mouse" src="~/Images/cursors/nop.gif" width="26" height="26" alt="" border="0" title="" />
                    <div id="info-mouse">
                        <dl>
                            Mouseover Keyboard Support
                            <dt>Zoom in:</dt>
                            <dd>
                                [+] / [PgDn] / [End] <em>(is faster)</em> /
                                <br /> [shift] + <u>left</u> mouse button /
                                <br /> double click + <u>left</u> mouse button /
                                <br /><u>middle</u> / <u>wheel</u> mouse button /
                                <!--<br />mouse wheel <u>down</u>-->
                                <br /><br />
                            </dd>
                            <dt>Zoom out:</dt>
                            <dd>
                                [–] / [PgUp] / [Home] <em>(is faster)</em> /
                                <br /> [alt] + <u>left</u> mouse button /
                                <br /><u>right</u> mouse button /
                                <!--<br />mouse wheel <u>up</u>-->
                                <br />
                                <br />
                            </dd>
                            <dt>Pan / Shift / Move:</dt>
                            <dd>
                                [left] / [right] / [down] / [up] arrow buttons
                                <br />+ [shift] <em>(is faster)</em> and + [alt] <em>(is slower)</em>
                            </dd>
                        </dl>
                    </div>
                </div>
                <div class="navig_east"><img onclick="move_h('+');" src="~/Images/cursors/nop.gif" width="15" height="26" alt="" border="0" title="move right" /></div>
                <div class="navig_south"><img onclick="move_v('+');" src="~/Images/cursors/nop.gif" width="26" height="15" alt="" border="0" title="move down" /></div>
            </div>

            <div class="slider_outer" unselectable="on">
                <div class="slider_inner">
                    <div id="slider" class="slider_knob"></div>
                </div>
                <div class="slider_plus"><img onclick="zoom('+');" src="~/Images/cursors/nop.gif" width="26" height="26" alt="" border="0" title="zoom in" /></div>
                <div class="slider_minus"><img onclick="zoom('-');" src="~/Images/cursors/nop.gif" width="26" height="26" alt="" border="0" title="zoom out" /></div>
            </div>
        </div>
    </div>   
</body>
</html >
